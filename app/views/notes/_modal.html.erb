<div class="modal-dialog">
  <div class="modal-content">
    <div class="embroidery">
    <div class="form">
    <%= form_for(@note, remote: true) do |f|%>
      <% if @type == "plan" %>
        <%= f.hidden_field :note_type , :value => "0"%>
      <% elsif @type == "schedule" %>
        <%= f.hidden_field :note_type , :value => "1"%>
      <% else %>
        <%= f.hidden_field :note_type , :value => "2"%>
      <% end %>
      <%= f.hidden_field :source, :value => @source %>

      <%= f.text_field :title, {:placeholder => "add #{@type}", :class => "title"} %>
      <hr>
      <%= f.text_area :content, {:id => "textarea", :class => "textarea", :placeholder => "content"} %>
      <br>
      <div id="importance_range">
        <%= f.range_field :importance, {:class => "range", :id => "range"} %>
      </div>
      <br>
      <% if @type == "plan" %>
        <%= f.datetime_select :start_time %>〜
        <%= f.datetime_select :end_time %>
      <% elsif @type == 'schedule' %>
        <%= f.date_select :start_time %>〜
        <%= f.date_select :end_time %>
      <% end %>
      <br>
      URL
      <br>
      <%= f.url_field :site_url %>
      <br>
      カテゴリー
      <br>
      <% if @categories == nil %>
        登録できるカテゴリーがありません！！
      <% else %>
        <%= f.collection_select :category_id, @categories, :id, :name %>
      <% end %>
      <br>
      <input type="reset"　value="リセット">
      <%= f.submit "投稿" %>
    <% end %>
    </div>
    </div>
  </div>
</div>
<script type="text/javascript">
(function(){
  var range_width = 100,
      height = 30,
      width = range_width / 100,
      draw = SVG('importance_range').size(range_width, height),
      range = document.getElementById('range');
  // range.addEventListener('change', rangeChanged, false);
  <% @notes.each do |note| %>
    drawLine(<%= note.importance %>, "<%= note.title %>", "#000");
  <% end %>
  var now_rect = drawLine(50, "now", "#ff0000");
  function drawLine(importance, name, col){
    var move_width = range_width * importance / 100;
    rect = draw.rect(width, height).move(move_width, 0).fill(col);
  }

  // function rangeChanged(e){

  // }

  var textarea = document.getElementById('textarea');
  textarea.addEventListener('change', changeBoxSize, false);

  function changeBoxSize(e){

  }
}());
</script>